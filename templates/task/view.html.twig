{% extends 'base.html.twig' %}

{% block title %}{{ task.name }}{% endblock %}

{% block body %}
<div class="max-w-2xl mx-auto mt-10">

    <h1 class="text-3xl font-bold mb-4">{{ task.name }}</h1>

    <p class="text-gray-700 mb-4">{{ task.description }}</p>

    <p class="text-sm text-gray-500 mb-4">
        Créée le : {{ task.createdAt|date('d/m/Y H:i') }}<br>
        Modifiée le : {{ task.updatedAt|date('d/m/Y H:i') }}<br>
        Auteur : {{ task.author.email }}
    </p>

    <div class="space-x-3">
        <a href="{{ path('task_index') }}" class="text-blue-600 underline">⬅ Retour</a>

        {% if is_granted('TASK_EDIT', task) %}
            <a href="{{ path('task_edit', { id: task.id }) }}"
               class="text-yellow-600 underline">
                Modifier
            </a>
        {% endif %}

        {% if is_granted('TASK_DELETE', task) %}
            <a href="{{ path('task_delete', { id: task.id }) }}"
               class="text-red-600 underline"
               onclick="return confirm('Supprimer ?');">
                Supprimer
            </a>
        {% endif %}
    </div>

</div>
{% endblock %}
